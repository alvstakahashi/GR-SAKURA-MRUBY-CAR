/***********************************************************************/
/*                                                                     */
/*  FILE        :hardware_setup.c                                      */
/*  DATE        :Mon, Jun 29, 2015                                     */
/*  DESCRIPTION :Hardware Setup file                                   */
/*  CPU TYPE    :RX63N                                                 */
/*                                                                     */
/*  This file is generated by KPIT GNU Project Generator.              */
/*                                                                     */
/***********************************************************************/
                    


#include "iodefine.h"
#ifdef __cplusplus
extern "C" {
#endif
extern void HardwareSetup(void);
#ifdef __cplusplus
}
#endif

#define ICU_ISELR028_ADDR		( ( volatile unsigned char * )0x0008711C )
/*
 * コンペアマッチタイマ割り込み要求先設定レジスタi（ISELRi）（i= 割り込みベクタ番号）
 */
#define ICU_ISEL_CPU			(0x00U)


void HardwareSetup(void)
{
	hardware_init_hook();

	CPU_UartInitialize();

//	PORT1.DDR.BIT.B5 = 1;				// P15 is Output
	MSTP( CMT0 ) = 0;					// Wakeup CMT0,CMT1
//	CMT0.CMCOR = 48000/8/100 ;				// CMCOR is 500ms Count / 500 /100 で　10us 
	CMT0.CMCOR = 48000/8/1000 ;				// CMCOR is 500ms Count / 500 /1000 で　1us 
//	CMT0.CMCOR = 468  - 1;				// CMCOR is 500ms Count / 500 /100 で　10us 
	CMT0.CMCR.WORD = 0x0040;			// CMIE is Enable,CKS is PCLK/8
	
//	*ICU_ISELR028_ADDR = ICU_ISEL_CPU;

	
	IEN( CMT0, CMI0 ) = 1;				// CMI0 Enable
	IPR( CMT0, CMI0 ) = 1;				// CMI0 Interrupt Level is 1
//	set_psw( 0x00010000 );				// Set I=1, IPL=0 of PSW
	CMT.CMSTR0.BIT.STR0 = 1;			// Start CMT0
	

//	for(;;)

/*
 BSC.CS0MOD.WORD = 0x1234;
 BSC.CS7CNT.WORD = 0x5678;
  
 SCI0.SCR.BIT.TE  = 0;
 SCI0.SCR.BIT.RE  = 0;
 SCI0.SCR.BIT.TE  = 1;
 SCI2.SSR.BIT.PER = 0;

 TMR0.TCR.BYTE = 0x12;
 TMR1.TCR.BYTE = 0x12;
 TMR2.TCR.BYTE = 0x12;
 
 P0.DDR.BYTE = 0x12;
 P1.DDR.BYTE = 0x12;
*/
}
